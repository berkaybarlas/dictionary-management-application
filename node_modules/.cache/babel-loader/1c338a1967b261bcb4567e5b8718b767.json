{"ast":null,"code":"import _classCallCheck from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/berkaybarlas/Desktop/git/onedot/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/berkaybarlas/Desktop/git/onedot/src/components/Dictionary/Dictionaries.js\";\nimport React, { Component } from 'react';\nimport './Dictionary.css';\nimport Dictionary from './Dictionary';\nimport addIcon from \"../../assets/add.svg\";\n\nvar Dictionaries =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Dictionaries, _Component);\n\n  function Dictionaries(props) {\n    var _this;\n\n    _classCallCheck(this, Dictionaries);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Dictionaries).call(this, props));\n\n    _this.handleClick = function (dictId) {\n      var dictionaries = _this.state.dictionaries;\n      var index = dictionaries.findIndex(function (e) {\n        return e.id === dictId;\n      });\n\n      if (index === -1) {\n        return;\n      }\n\n      _this.setState(function (state) {\n        return {\n          lastDictId: dictId\n        };\n      }, function () {\n        return _this.props.change(_this.state.dictionaries[index].items, _this.state.dictionaries[index].name);\n      });\n    };\n\n    _this.updateTable = function (dictId, items) {\n      var dictionaries = _this.state.dictionaries;\n      var index = dictionaries.findIndex(function (e) {\n        return e.id === dictId;\n      });\n\n      if (index === -1) {\n        return;\n      } else {\n        dictionaries[index].items = items;\n      }\n\n      _this.setState(function (state) {\n        return {\n          dictionaries: dictionaries\n        };\n      }, function () {\n        _this.saveToStorage();\n      });\n    };\n\n    _this.remove = function (itemId) {\n      _this.setState(function (state) {\n        return {\n          dictionaries: state.dictionaries.filter(function (item) {\n            return item.id !== itemId;\n          })\n        };\n      });\n    };\n\n    _this.state = {\n      dictionaries: [],\n      items: [],\n      dictionary: '',\n      history: {\n        dictionaries: []\n      },\n      lastDictId: ''\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.saveToStorage = _this.saveToStorage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.updateTable = _this.updateTable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.remove = _this.remove.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Dictionaries, [{\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState({\n        dictionary: e.target.value\n      });\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      if (!this.state.dictionary.length) {\n        return;\n      }\n\n      var newItems = [];\n\n      if (this.state.lastDictId === '') {\n        newItems = this.props.items;\n      }\n\n      var newItem = {\n        id: Date.now(),\n        name: this.state.dictionary,\n        items: newItems\n      };\n      this.setState(function (state) {\n        return {\n          dictionaries: state.dictionaries.concat(newItem),\n          dictionary: '',\n          lastDictId: newItem.id\n        };\n      }, function () {\n        _this2.handleClick(newItem.id);\n\n        _this2.saveToStorage();\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      // You don't have to do this check first, but it can help prevent an unneeded render\n      if (nextProps !== undefined & nextProps.items !== this.state.items & nextProps.items !== []) {\n        this.setState({\n          items: nextProps.items\n        });\n        console.log(\"updateState\");\n        this.updateTable(this.state.lastDictId, nextProps.items);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"table-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }, \"Dictionaries\"), React.createElement(\"div\", {\n        className: \"Dictionaries\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"dictionary-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, this.state.dictionaries.map(function (item) {\n        return React.createElement(Dictionary, {\n          className: \"dictionary-item\",\n          key: item.id,\n          item: item,\n          change: _this3.handleClick,\n          remove: _this3.remove,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        });\n      })), React.createElement(\"form\", {\n        className: \"Dictionary\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        className: \"dictionary-input\",\n        onChange: this.handleChange,\n        value: this.state.dictionary,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"line-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        width: 17,\n        src: addIcon,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      })))));\n    }\n  }, {\n    key: \"saveToStorage\",\n    value: function saveToStorage() {\n      var data = this.state.history;\n      data.dictionaries = this.state.dictionaries;\n      localStorage.setItem('dictionaries', JSON.stringify(data));\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.recover();\n    }\n  }, {\n    key: \"recover\",\n    value: function recover() {\n      //error catch\n      var data = JSON.parse(localStorage.getItem('dictionaries'));\n\n      if (!data) {\n        return;\n      }\n\n      console.log(data);\n      this.setState({\n        history: data,\n        dictionaries: data.dictionaries\n      });\n    }\n  }]);\n\n  return Dictionaries;\n}(Component);\n\nexport default Dictionaries;","map":{"version":3,"sources":["/Users/berkaybarlas/Desktop/git/onedot/src/components/Dictionary/Dictionaries.js"],"names":["React","Component","Dictionary","Dictionaries","props","handleClick","dictId","dictionaries","state","index","findIndex","e","id","setState","lastDictId","change","items","name","updateTable","saveToStorage","remove","itemId","filter","item","dictionary","history","handleChange","bind","handleSubmit","target","value","preventDefault","length","newItems","newItem","Date","now","concat","nextProps","undefined","console","log","map","addIcon","data","localStorage","setItem","JSON","stringify","recover","parse","getItem"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './Dictionary.css';\nimport Dictionary from './Dictionary'\nimport addIcon from \"../../assets/add.svg\"\n\nclass Dictionaries extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dictionaries: [],\n            items: [],\n            dictionary: '',\n            history: { dictionaries: [] },\n            lastDictId: '',\n        };\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.saveToStorage = this.saveToStorage.bind(this);\n        this.updateTable = this.updateTable.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n        this.remove = this.remove.bind(this);\n    }\n\n    handleChange(e) {\n        this.setState({ dictionary: e.target.value });\n    }\n\n    handleSubmit(e) {\n        e.preventDefault();\n        if (!this.state.dictionary.length) {\n            return;\n        }\n        let newItems = [];\n        if (this.state.lastDictId === '') {\n            newItems = this.props.items;\n        }\n        const newItem = {\n            id: Date.now(),\n            name: this.state.dictionary,\n            items: newItems,\n        }\n\n        this.setState(state => ({\n            dictionaries: state.dictionaries.concat(newItem),\n            dictionary: '',\n            lastDictId: newItem.id,\n        }), () => {\n            this.handleClick(newItem.id);\n            this.saveToStorage();\n        });\n    }\n\n    handleClick = (dictId) => {\n        const dictionaries = this.state.dictionaries;\n        const index = dictionaries.findIndex((e) => e.id === dictId);\n\n        if (index === -1) {\n            return;\n        }\n\n        this.setState(state => ({\n            lastDictId: dictId,\n        }), () => this.props.change(this.state.dictionaries[index].items, this.state.dictionaries[index].name));\n    }\n\n    updateTable = (dictId, items) => {\n        const dictionaries = this.state.dictionaries;\n        const index = dictionaries.findIndex((e) => e.id === dictId);\n\n        if (index === -1) {\n            return;\n        } else {\n            dictionaries[index].items = items;\n        }\n        this.setState(state => ({\n            dictionaries: dictionaries,\n        }), () => { this.saveToStorage() });\n    }\n\n\n    remove = (itemId) => {\n        this.setState(state => ({\n            dictionaries: state.dictionaries.filter(item => item.id !== itemId)\n        }));\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // You don't have to do this check first, but it can help prevent an unneeded render\n        if ((nextProps !== undefined) & nextProps.items !== this.state.items & nextProps.items !== []) {\n            this.setState({ items: nextProps.items });\n            console.log(\"updateState\");\n            this.updateTable(this.state.lastDictId, nextProps.items);\n        }\n    }\n\n    render() {\n        return (\n            <div>\n                <header className=\"table-header\">\n                    Dictionaries\n            </header>\n                <div className=\"Dictionaries\">\n                    <div className=\"dictionary-list\">\n                        {this.state.dictionaries.map(item => (\n                            <Dictionary\n                                className=\"dictionary-item\"\n                                key={item.id}\n                                item={item}\n                                change={this.handleClick}\n                                remove={this.remove} />\n                        ))}\n                    </div>\n                    <form\n                        className=\"Dictionary\"\n                        onSubmit={this.handleSubmit}>\n                        <input\n                            className=\"dictionary-input\"\n                            onChange={this.handleChange}\n                            value={this.state.dictionary} />\n                        <button className=\"line-button\">\n                            <img width={17} src={addIcon} alt=\"\" />\n                        </button>\n\n                    </form>\n\n                </div>\n            </div>\n        );\n    }\n\n    saveToStorage() {\n        let data = this.state.history;\n        data.dictionaries = this.state.dictionaries;\n        localStorage.setItem('dictionaries', JSON.stringify(data));\n    }\n\n    componentDidMount() {\n        this.recover();\n    }\n\n    recover() {\n        //error catch\n        let data = JSON.parse(localStorage.getItem('dictionaries'));\n        if (!data) {\n            return;\n        }\n        console.log(data);\n        this.setState({\n            history: data,\n            dictionaries: data.dictionaries,\n        });\n    }\n}\nexport default Dictionaries;\n"]},"metadata":{},"sourceType":"module"}